<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>ZombieGameUPDATE101</title>
  <style>
    body {
      margin: 0;
      background: #111;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: white;
      font-family: sans-serif;
    }
    canvas {
      background: #222;
      border: 2px solid #555;
      display: none;
    }
    #menu, #pauseMenu {
      text-align: center;
    }
    #colorPicker, #pauseColorPicker {
      margin-top: 10px;
      width: 120px;
      height: 40px;
      border: none;
      cursor: pointer;
    }
    #startBtn, #resumeBtn {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      background: #4caf50;
      color: white;
    }
    #overlay {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      pointer-events: none;
      display: none;
    }
    #pauseMenu {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0,0,0,0.8);
      padding: 20px;
      border: 2px solid #555;
    }
  </style>
</head>
<body>

  <!-- START MENU -->
  <div id="menu">
    <h2>Select Your Player Color</h2>
    <input type="color" id="colorPicker" value="#00bfff">
    <br>
    <button id="startBtn">Start Game</button>
  </div>

  <!-- PAUSE MENU -->
  <div id="pauseMenu">
    <h2>Paused</h2>
    <p>Change Player Color:</p>
    <input type="color" id="pauseColorPicker" value="#00bfff">
    <br>
    <button id="resumeBtn">Resume</button>
  </div>

  <!-- GAME UI -->
  <div id="overlay">
    <div>Arrow Keys to Move • P to Pause</div>
    <div id="status"></div>
  </div>

  <canvas id="game" width="600" height="400"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const menu = document.getElementById("menu");
    const pauseMenu = document.getElementById("pauseMenu");
    const overlay = document.getElementById("overlay");
    const status = document.getElementById("status");
    const colorPicker = document.getElementById("colorPicker");
    const pauseColorPicker = document.getElementById("pauseColorPicker");
    const startBtn = document.getElementById("startBtn");
    const resumeBtn = document.getElementById("resumeBtn");

    let playerColor = "#00bfff";

    const player = {
      x: 300,
      y: 200,
      size: 20,
      speed: 3
    };

    const keys = {
      ArrowUp: false,
      ArrowDown: false,
      ArrowLeft: false,
      ArrowRight: false
    };

    const zombies = [];
    const zombieSize = 20;
    const zombieSpeed = 1.3;
    let gameOver = false;
    let score = 0;
    let gameStarted = false;
    let paused = false;

    startBtn.onclick = () => {
      playerColor = colorPicker.value;
      pauseColorPicker.value = playerColor;
      menu.style.display = "none";
      canvas.style.display = "block";
      overlay.style.display = "block";
      gameStarted = true;
    };

    resumeBtn.onclick = () => {
      playerColor = pauseColorPicker.value;
      paused = false;
      pauseMenu.style.display = "none";
    };

    function spawnZombie() {
      const side = Math.floor(Math.random() * 4);
      let x, y;

      if (side === 0) { x = Math.random() * canvas.width; y = -zombieSize; }
      if (side === 1) { x = canvas.width + zombieSize; y = Math.random() * canvas.height; }
      if (side === 2) { x = Math.random() * canvas.width; y = canvas.height + zombieSize; }
      if (side === 3) { x = -zombieSize; y = Math.random() * canvas.height; }

      zombies.push({ x, y });
    }

    setInterval(() => {
      if (gameStarted && !gameOver && !paused) {
        spawnZombie();
        score++;
      }
    }, 900);

    document.addEventListener("keydown", (e) => {
      if (e.key in keys) keys[e.key] = true;

      if (e.key.toLowerCase() === "p" && gameStarted && !gameOver) {
        paused = !paused;
        pauseMenu.style.display = paused ? "block" : "none";
      }

      if (gameOver && e.key.toLowerCase() === "r") resetGame();
    });

    document.addEventListener("keyup", (e) => {
      if (e.key in keys) keys[e.key] = false;
    });

    function resetGame() {
      player.x = 300;
      player.y = 200;
      zombies.length = 0;
      gameOver = false;
      score = 0;
      status.textContent = "";
    }

    function update() {
      if (!gameStarted || gameOver || paused) return;

      if (keys.ArrowUp) player.y -= player.speed;
      if (keys.ArrowDown) player.y += player.speed;
      if (keys.ArrowLeft) player.x -= player.speed;
      if (keys.ArrowRight) player.x += player.speed;

      player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
      player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));

      zombies.forEach(z => {
        const dx = player.x - z.x;
        const dy = player.y - z.y;
        const dist = Math.hypot(dx, dy) || 1;
        z.x += (dx / dist) * zombieSpeed;
        z.y += (dy / dist) * zombieSpeed;
      });

      zombies.forEach(z => {
        if (
          z.x < player.x + player.size &&
          z.x + zombieSize > player.x &&
          z.y < player.y + player.size &&
          z.y + zombieSize > player.y
        ) {
          gameOver = true;
          status.textContent = `Game Over! Score: ${score} • Press R to Restart`;
        }
      });
    }

    function draw() {
      if (!gameStarted) return;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = playerColor;
      ctx.fillRect(player.x, player.y, player.size, player.size);

      ctx.fillStyle = "limegreen";
      zombies.forEach(z => {
        ctx.fillRect(z.x, z.y, zombieSize, zombieSize);
      });

      ctx.fillStyle = "white";
      ctx.font = "16px sans-serif";
      ctx.fillText("Score: " + score, 10, 20);
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>